(this["webpackJsonpcourse-flux"]=this["webpackJsonpcourse-flux"]||[]).push([[7],{38:function(e,t,r){"use strict";var n=r(53),c=new n.Dispatcher;t.a=c},39:function(e,t,r){"use strict";t.a={CREATE_COURSE:"CREATE_COURSE",LOAD_COURSES:"LOAD_COURSES",UPDATE_COURSE:"UPDATE_COURSE",DELETE_COURSE:"DELETE_COURSE",CREATE_AUTHOR:"CREATE_AUTHOR",LOAD_AUTHOR:"LOAD_AUTHOR",UPDATE_AUTHOR:"UPDATE_AUTHOR",DELETE_AUTHOR:"DELETE_AUTHOR"}},40:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return i}));var n=r(49),c=r.n(n),u=r(50);function a(e){return o.apply(this,arguments)}function o(){return(o=Object(u.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:if(400!==t.status){e.next=7;break}return e.next=5,t.text();case 5:throw r=e.sent,new Error(r);case 7:throw new Error("Network response was not ok.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(e){throw console.error("API call failed. "+e),e}},45:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return n}))},51:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(45);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},54:function(e,t,r){"use strict";var n=r(41),c=r(42),u=r(44),a=r(43),o=r(48),i=r(38),s=r(39),O="change",f=[],E=new(function(e){Object(u.a)(r,e);var t=Object(a.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"addChangeLister",value:function(e){this.on(O,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(O,e)}},{key:"emitChange",value:function(){this.emit(O)}},{key:"getCourses",value:function(){return f}},{key:"getCoursesBySlug",value:function(e){return f.find((function(t){return t.slug===e}))}}]),r}(o.EventEmitter));i.a.register((function(e){switch(e.actionType){case s.a.CREATE_COURSE:f.push(e.course),E.emitChange();break;case s.a.LOAD_COURSES:f=e.courses,E.emitChange();break;case s.a.UPDATE_COURSE:f=f.map((function(t){return t.id===e.course.id?e.course:t})),E.emitChange();break;case s.a.DELETE_COURSE:f=f.filter((function(t){return t.id!==parseInt(e.courseId,10)})),E.emitChange()}})),t.a=E},55:function(e,t,r){"use strict";r.d(t,"c",(function(){return E})),r.d(t,"b",(function(){return h})),r.d(t,"a",(function(){return b}));var n=r(49),c=r.n(n),u=r(50),a=r(51),o=r(40),i=Object({NODE_ENV:"production",PUBLIC_URL:"/course-flux",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL?Object({NODE_ENV:"production",PUBLIC_URL:"/course-flux",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL+"/courses/":"https://my-json-server.typicode.com/rayhansoe/course-db-json/courses/";var s=r(38),O=r(39),f=r(18),E=function(e){return function(e){return fetch(i+(e.id||""),{method:e.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(Object(a.a)(Object(a.a)({},e),{},{authorId:parseInt(e.authorId,10)}))}).then(o.b).catch(o.a)}(e).then((function(t){s.a.dispatch({actionType:e.id?O.a.UPDATE_COURSE:O.a.CREATE_COURSE,course:t}),e.id?f.b.info("\ud83d\ude80 Course Updated"):f.b.info("\ud83d\ude80 Course Saved")}))},h=function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(i).then(o.b).catch(o.a).then((function(e){s.a.dispatch({actionType:O.a.LOAD_COURSES,courses:e})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(e){return function(e){return fetch(i+e,{method:"DELETE"}).then(o.b).catch(o.a)}(e).then((function(){s.a.dispatch({actionType:O.a.DELETE_COURSE,courseId:e}),f.b.error("\u26a0 Course deleted")}))}},73:function(e,t,r){"use strict";r.r(t);var n=r(45),c=r(51),u=r(52),a=r(0),o=r(8),i=r(54),s=r(55),O=r(3),f=r(1),E=Object(o.a)((function(){return r.e(10).then(r.bind(null,62))}));t.default=function(e){var t=Object(a.useState)({}),r=Object(u.a)(t,2),o=r[0],h=r[1],b=Object(O.g)(),d=Object(a.useState)(i.a.getCourses()),l=Object(u.a)(d,2),p=l[0],j=l[1],C=Object(a.useState)({id:null,slug:"",title:"",authorId:null,category:""}),S=Object(u.a)(C,2),T=S[0],_=S[1];function g(){j(i.a.getCourses())}Object(a.useEffect)((function(){i.a.addChangeLister(g);var t=e.match.params.slug;return 0===p.length?Object(s.b)():t&&(i.a.getCoursesBySlug(t)?_(i.a.getCoursesBySlug(t)):b.push("/404")),function(){return i.a.removeChangeListener(g)}}),[p.length,b,e.match.params.slug]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"jumbotron",children:[Object(f.jsx)("h2",{children:"Manage Course"}),e.match.params.slug?Object(f.jsx)("h5",{className:"mt-3 fw-normal",children:T.title}):""]}),Object(f.jsx)(E,{course:T,onChange:function(e){var t=e.target,r=Object(c.a)(Object(c.a)({},T),{},Object(n.a)({},t.name,t.value));_(r)},onSubmit:function(t){t.preventDefault(),function(){var e={};return T.title||(e.title="Title is required"),T.authorId||(e.authorId="Author is required"),T.category||(e.category="Category is required"),h(e),0===Object.keys(e).length}()&&Object(s.c)(T).then((function(){e.history.push("/courses")}))},errors:o})]})}}}]);
//# sourceMappingURL=7.f1888029.chunk.js.map