(this["webpackJsonpcourse-flux"]=this["webpackJsonpcourse-flux"]||[]).push([[5],{38:function(t,e,n){"use strict";var r=n(53),a=new r.Dispatcher;e.a=a},39:function(t,e,n){"use strict";e.a={CREATE_COURSE:"CREATE_COURSE",LOAD_COURSES:"LOAD_COURSES",UPDATE_COURSE:"UPDATE_COURSE",DELETE_COURSE:"DELETE_COURSE",CREATE_AUTHOR:"CREATE_AUTHOR",LOAD_AUTHOR:"LOAD_AUTHOR",UPDATE_AUTHOR:"UPDATE_AUTHOR",DELETE_AUTHOR:"DELETE_AUTHOR"}},40:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return i}));var r=n(49),a=n.n(r),c=n(50);function u(t){return o.apply(this,arguments)}function o(){return(o=Object(c.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.ok){t.next=2;break}return t.abrupt("return",e.json());case 2:if(400!==e.status){t.next=7;break}return t.next=5,e.text();case 5:throw n=t.sent,new Error(n);case 7:throw new Error("Network response was not ok.");case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(t){throw console.error("API call failed. "+t),t}},45:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},46:function(t,e,n){"use strict";var r=n(41),a=n(42),c=n(44),u=n(43),o=n(48),i=n(38),s=n(39),O="change",h=[],f=new(function(t){Object(c.a)(n,t);var e=Object(u.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"emitChange",value:function(){this.emit(O)}},{key:"addChangeListener",value:function(t){this.on(O,t)}},{key:"removeChangeListener",value:function(t){this.removeListener(O,t)}},{key:"getAuthors",value:function(){return h}},{key:"getAuthorsBySlug",value:function(t){return h.find((function(e){return e.slug===t}))}}]),n}(o.EventEmitter));i.a.register((function(t){switch(t.actionType){case s.a.CREATE_AUTHOR:h.push(t.author),f.emitChange();break;case s.a.LOAD_AUTHOR:h=t.authors,f.emitChange();break;case s.a.UPDATE_AUTHOR:h=h.map((function(e){return e.id===t.author.id?t.author:e})),f.emitChange();break;case s.a.DELETE_AUTHOR:h=h.filter((function(e){return e.id!==parseInt(t.id,10)})),f.emitChange()}})),e.a=f},47:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return O}));var r=n(39),a=n(40),c=Object({NODE_ENV:"production",PUBLIC_URL:"/course-flux",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL?Object({NODE_ENV:"production",PUBLIC_URL:"/course-flux",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL+"/authors/":"https://my-json-server.typicode.com/rayhansoe/course-db-json/authors/";var u=n(38),o=n(18),i=function(t){return function(t){return fetch(c+(t.id||""),{method:t.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then(a.b).catch(a.a)}(t).then((function(e){u.a.dispatch({actionType:t.id?r.a.UPDATE_AUTHOR:r.a.CREATE_AUTHOR,author:e}),t.id?o.b.info("\ud83d\ude80 Author Updated"):o.b.info("\ud83d\ude80 Author Saved")}))},s=function(){return fetch(c).then(a.b).catch(a.a).then((function(t){u.a.dispatch({actionType:r.a.LOAD_AUTHOR,authors:t})}))},O=function(t){return(e=t,fetch(c+e,{method:"DELETE"}).then(a.b).catch(a.a)).then((function(){u.a.dispatch({actionType:r.a.DELETE_AUTHOR,id:t}),o.b.error("\u26a0 Course deleted")}));var e}},51:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(45);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},74:function(t,e,n){"use strict";n.r(e);var r=n(45),a=n(51),c=n(52),u=n(0),o=n(8),i=n(47),s=n(46),O=n(3),h=n(1),f=Object(o.a)((function(){return n.e(12).then(n.bind(null,63))}));e.default=function(t){var e=Object(O.g)(),n=Object(u.useState)(s.a.getAuthors()),o=Object(c.a)(n,2),E=o[0],b=o[1],d=Object(u.useState)({}),l=Object(c.a)(d,2),p=l[0],T=l[1],A=Object(u.useState)({id:null,name:"",slug:""}),j=Object(c.a)(A,2),_=j[0],g=j[1];function R(){b(s.a.getAuthors())}Object(u.useEffect)((function(){s.a.addChangeListener(R);var n=t.match.params.slug;return 0===E.length?Object(i.b)():n&&(s.a.getAuthorsBySlug(n)?g(s.a.getAuthorsBySlug(n)):e.push("/course-flux/404")),function(){s.a.removeChangeListener(R)}}),[E.length,e,t.match.params.slug]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"jumbotron",children:[Object(h.jsx)("h2",{children:"Manage Course"}),t.match.params.slug?Object(h.jsx)("h5",{className:"mt-3 fw-normal",children:_.name}):""]}),Object(h.jsx)(f,{author:_,onChange:function(t){var e=t.target,n=Object(a.a)(Object(a.a)({},_),{},Object(r.a)({},e.name,e.value));g(n)},onSubmit:function(e){e.preventDefault(),function(){var t={};return _.name||(t.name="Name is required"),T(t),0===Object.keys(t).length}()&&Object(i.c)(_).then((function(){t.history.push("/authors")}))},errors:p})]})}}}]);
//# sourceMappingURL=5.35c5907c.chunk.js.map