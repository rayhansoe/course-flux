(this["webpackJsonpcourse-flux"]=this["webpackJsonpcourse-flux"]||[]).push([[8],{38:function(t,e,n){"use strict";var r=n(53),a=new r.Dispatcher;e.a=a},39:function(t,e,n){"use strict";e.a={CREATE_COURSE:"CREATE_COURSE",LOAD_COURSES:"LOAD_COURSES",UPDATE_COURSE:"UPDATE_COURSE",DELETE_COURSE:"DELETE_COURSE",CREATE_AUTHOR:"CREATE_AUTHOR",LOAD_AUTHOR:"LOAD_AUTHOR",UPDATE_AUTHOR:"UPDATE_AUTHOR",DELETE_AUTHOR:"DELETE_AUTHOR"}},40:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i}));var r=n(49),a=n.n(r),u=n(50);function o(t){return c.apply(this,arguments)}function c(){return(c=Object(u.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.ok){t.next=2;break}return t.abrupt("return",e.json());case 2:if(400!==e.status){t.next=7;break}return t.next=5,e.text();case 5:throw n=t.sent,new Error(n);case 7:throw new Error("Network response was not ok.");case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(t){throw console.error("API call failed. "+t),t}},46:function(t,e,n){"use strict";var r=n(41),a=n(42),u=n(44),o=n(43),c=n(48),i=n(38),s=n(39),h="change",E=[],O=new(function(t){Object(u.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"emitChange",value:function(){this.emit(h)}},{key:"addChangeListener",value:function(t){this.on(h,t)}},{key:"removeChangeListener",value:function(t){this.removeListener(h,t)}},{key:"getAuthors",value:function(){return E}},{key:"getAuthorsBySlug",value:function(t){return E.find((function(e){return e.slug===t}))}}]),n}(c.EventEmitter));i.a.register((function(t){switch(t.actionType){case s.a.CREATE_AUTHOR:E.push(t.author),O.emitChange();break;case s.a.LOAD_AUTHOR:E=t.authors,O.emitChange();break;case s.a.UPDATE_AUTHOR:E=E.map((function(e){return e.id===t.author.id?t.author:e})),O.emitChange();break;case s.a.DELETE_AUTHOR:E=E.filter((function(e){return e.id!==parseInt(t.id,10)})),O.emitChange()}})),e.a=O},47:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return h}));var r=n(39),a=n(40),u=Object({NODE_ENV:"production",PUBLIC_URL:"/course-flux",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL?Object({NODE_ENV:"production",PUBLIC_URL:"/course-flux",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL+"/authors/":"https://my-json-server.typicode.com/rayhansoe/course-db-json/authors/";var o=n(38),c=n(18),i=function(t){return function(t){return fetch(u+(t.id||""),{method:t.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then(a.b).catch(a.a)}(t).then((function(e){o.a.dispatch({actionType:t.id?r.a.UPDATE_AUTHOR:r.a.CREATE_AUTHOR,author:e}),t.id?c.b.info("\ud83d\ude80 Author Updated"):c.b.info("\ud83d\ude80 Author Saved")}))},s=function(){return fetch(u).then(a.b).catch(a.a).then((function(t){o.a.dispatch({actionType:r.a.LOAD_AUTHOR,authors:t})}))},h=function(t){return(e=t,fetch(u+e,{method:"DELETE"}).then(a.b).catch(a.a)).then((function(){o.a.dispatch({actionType:r.a.DELETE_AUTHOR,id:t}),c.b.error("\u26a0 Course deleted")}));var e}},71:function(t,e,n){"use strict";n.r(e);var r=n(52),a=n(0),u=n(46),o=n(47),c=n(12),i=n(8),s=n(2),h=Object(i.a)((function(){return n.e(13).then(n.bind(null,61))}));e.default=function(){var t=Object(a.useState)(u.a.getAuthors()),e=Object(r.a)(t,2),n=e[0],i=e[1];function E(){i(u.a.getAuthors())}return Object(a.useEffect)((function(){return u.a.addChangeListener(E),0===u.a.getAuthors().length&&Object(o.b)(),function(){u.a.removeChangeListener(E)}}),[]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Courses"}),Object(s.jsx)(c.b,{className:"btn btn-primary",to:"/author",children:"Add Course"}),Object(s.jsx)(h,{authors:n,deleteAuthor:o.a})]})}}}]);
//# sourceMappingURL=8.3c9c127e.chunk.js.map