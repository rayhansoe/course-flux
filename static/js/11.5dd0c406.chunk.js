(this["webpackJsonpcourse-flux"]=this["webpackJsonpcourse-flux"]||[]).push([[11],{46:function(t,e,n){"use strict";var c=n(41),r=n(42),i=n(44),a=n(43),o=n(48),u=n(38),s=n(39),h="change",d=[],l=new(function(t){Object(i.a)(n,t);var e=Object(a.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"emitChange",value:function(){this.emit(h)}},{key:"addChangeListener",value:function(t){this.on(h,t)}},{key:"removeChangeListener",value:function(t){this.removeListener(h,t)}},{key:"getAuthors",value:function(){return d}},{key:"getAuthorsBySlug",value:function(t){return d.find((function(e){return e.slug===t}))}}]),n}(o.EventEmitter));u.a.register((function(t){switch(t.actionType){case s.a.CREATE_AUTHOR:d.push(t.author),l.emitChange();break;case s.a.LOAD_AUTHOR:d=t.authors,l.emitChange();break;case s.a.UPDATE_AUTHOR:d=d.map((function(e){return e.id===t.author.id?t.author:e})),l.emitChange();break;case s.a.DELETE_AUTHOR:d=d.filter((function(e){return e.id!==parseInt(t.id,10)})),l.emitChange()}})),e.a=l},47:function(t,e,n){"use strict";n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return h}));var c=n(39),r=n(40),i=Object({NODE_ENV:"production",PUBLIC_URL:"/course-flux",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL?Object({NODE_ENV:"production",PUBLIC_URL:"/course-flux",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL+"/authors/":"https://my-json-server.typicode.com/rayhansoe/course-db-json/authors/";var a=n(38),o=n(18),u=function(t){return function(t){return fetch(i+(t.id||""),{method:t.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then(r.b).catch(r.a)}(t).then((function(e){a.a.dispatch({actionType:t.id?c.a.UPDATE_AUTHOR:c.a.CREATE_AUTHOR,author:e}),t.id?o.b.info("\ud83d\ude80 Author Updated"):o.b.info("\ud83d\ude80 Author Saved")}))},s=function(){return fetch(i).then(r.b).catch(r.a).then((function(t){a.a.dispatch({actionType:c.a.LOAD_AUTHOR,authors:t})}))},h=function(t){return(e=t,fetch(i+e,{method:"DELETE"}).then(r.b).catch(r.a)).then((function(){a.a.dispatch({actionType:c.a.DELETE_AUTHOR,id:t}),o.b.error("\u26a0 Course deleted")}));var e}},60:function(t,e,n){"use strict";n.r(e);var c=n(52),r=n(12),i=n(46),a=n(47),o=n(0),u=n(8),s=n(1),h=Object(u.a)((function(){return n.e(18).then(n.bind(null,64))}));e.default=function(t){var e=t.courses,n=t.deleteCourse,u=Object(o.useState)(i.a.getAuthors()),d=Object(c.a)(u,2),l=d[0],b=d[1],O=Object(o.useState)(!1),j=Object(c.a)(O,2),f=j[0],T=j[1],E=Object(o.useState)(),p=Object(c.a)(E,2),A=p[0],_=p[1],g=Object(o.useState)(),v=Object(c.a)(g,2),C=v[0],S=v[1];Object(o.useEffect)((function(){return i.a.addChangeListener(x),0===l.length&&Object(a.b)(),function(){i.a.removeChangeListener(x)}}),[l.length]);var x=function(){b(i.a.getAuthors())},m=function(t){var e=t.id,n=t.authors;return Object(s.jsx)("em",{children:n.find((function(t){return t.id===e})).name})},y=function(){f?(S({}),_(null),T(!f)):T(!f)};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{children:Object(s.jsxs)("table",{className:"table",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{scope:"col",children:"Title"}),Object(s.jsx)("th",{scope:"col",children:"Author"}),Object(s.jsx)("th",{scope:"col",children:"Category"}),Object(s.jsx)("th",{scope:"col",children:"Action"})]})}),Object(s.jsx)("tbody",{children:e.map((function(t,e){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:Object(s.jsx)(r.b,{to:"/course/"+t.slug,children:t.title})}),Object(s.jsx)("td",{children:0!==l.length?Object(s.jsx)(m,{id:t.authorId,authors:l}):"none"}),Object(s.jsx)("td",{children:t.category}),Object(s.jsx)("td",{children:Object(s.jsx)("button",{type:"button",className:"btn btn-outline-danger","data-bs-toggle":"modal","data-bs-target":"#exampleModal",onClick:function(){y(),function(t,e){_(e),S(t)}(t,t.id)},children:"DELETE"})})]},e)}))})]})}),Object(s.jsx)(h,{status:f,onClick:y,deleteCourse:n,styles:function(){return"block"},id:A||null,course:C||{},authors:l||[]})]})}}}]);
//# sourceMappingURL=11.5dd0c406.chunk.js.map